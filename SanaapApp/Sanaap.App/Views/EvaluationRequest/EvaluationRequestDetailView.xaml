<?xml version="1.0" encoding="utf-8" ?>
<popup:PopupPage
    x:Class="Sanaap.App.Views.EvaluationRequest.EvaluationRequestDetailView"
    xmlns="http://xamarin.com/schemas/2014/forms"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:animations="clr-namespace:Rg.Plugins.Popup.Animations;assembly=Rg.Plugins.Popup"
    xmlns:controls="clr-namespace:Sanaap.App.Controls"
    xmlns:insurancePopup="clr-namespace:Sanaap.App.Views.Insurance"
    xmlns:syncfusion="clr-namespace:Syncfusion.ListView.XForms;assembly=Syncfusion.SfListView.XForms"
    xmlns:navigationdrawer="clr-namespace:Syncfusion.SfNavigationDrawer.XForms;assembly=Syncfusion.SfNavigationDrawer.XForms"
    xmlns:popup="clr-namespace:Rg.Plugins.Popup.Pages;assembly=Rg.Plugins.Popup"
    xmlns:syncCombobox="clr-namespace:Syncfusion.XForms.ComboBox;assembly=Syncfusion.SfComboBox.XForms"
    xmlns:viewModels="clr-namespace:Sanaap.App.ViewModels.Insurance"
    x:Name="requestDetailView"
    Padding="30,50,30,50"
    HasSystemPadding="True"
    SystemPaddingSides="All">
    <popup:PopupPage.Animation>
        <animations:ScaleAnimation
            DurationIn="400"
            DurationOut="300"
            EasingIn="SinOut"
            EasingOut="SinIn"
            HasBackgroundAnimation="True"
            PositionIn="Center"
            PositionOut="Center"
            ScaleIn="1.2"
            ScaleOut="0.8" />
    </popup:PopupPage.Animation>
    <Frame CornerRadius="10">
        <ScrollView BackgroundColor="White">
            <StackLayout>
                <StackLayout Padding="10">

                    <StackLayout Orientation="Horizontal">
                        <Label Text="بیمه گذار/مقصر" />
                        <Button Command="{Binding SelectFromInsurances}" />
                    </StackLayout>

                    <Label Text="نام" />
                    <controls:SanaapEntry Text="{Binding Request.OwnerFirstName, Mode=TwoWay}" />

                    <Label Text="نام خانوادگی" />
                    <controls:SanaapEntry Text="{Binding Request.OwnerLastName, Mode=TwoWay}" />

                    <Label Text="بیمه" />
                    <syncfusion:SfListView Orientation="Horizontal" ItemsSource="{Binding Insurers}">
                        <syncfusion:SfListView.ItemTemplate>
                            <DataTemplate>
                                <StackLayout>
                                    <StackLayout.Triggers>
                                        <DataTrigger TargetType="StackLayout"
                                                 Binding="{Binding IsSelected}" Value="False">
                                            <Setter Property="BackgroundColor" Value="White"/>
                                        </DataTrigger>
                                        <DataTrigger TargetType="StackLayout"
                                                 Binding="{Binding IsSelected}" Value="True">
                                            <Setter Property="BackgroundColor" Value="Gray"/>
                                        </DataTrigger>
                                    </StackLayout.Triggers>
                                    <StackLayout.GestureRecognizers>
                                        <TapGestureRecognizer Command="{Binding Path=BindingContext.SelectInsurer,Source={x:Reference requestDetailView}}" CommandParameter="{Binding .}"/>
                                    </StackLayout.GestureRecognizers>
                                    <Image Source="{Binding Image}" HeightRequest="60"/>
                                    <Label Text="{Binding Name}" HorizontalTextAlignment="Center"/>
                                </StackLayout>
                            </DataTemplate>
                        </syncfusion:SfListView.ItemTemplate>
                    </syncfusion:SfListView>

                    <Label Text="نام خودرو" />
                    <syncCombobox:SfComboBox
                        AllowFiltering="True"
                        DataSource="{Binding Cars}"
                        DisplayMemberPath="Name"
                        IsEditableMode="True"
                        SelectedItem="{Binding SelectedCar}" />

                    <Label Text="شماره بیمه نامه" />
                    <controls:SanaapEntry Text="{Binding Request.InsurerNo}" />

                    <Label Text="پلاک" />
                    <controls:SanaapEntry Text="{Binding Request.PlateNumber}" />
                </StackLayout>
            </StackLayout>
        </ScrollView>
    </Frame>
</popup:PopupPage>
